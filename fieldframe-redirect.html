<!DOCTYPE html>
<html>
  <head>
    <script>
      const params = new URLSearchParams(window.location.search);
      const code = params.get("code");

      if (code) {
        // 1. Try custom scheme redirect
        window.location.href = `fieldframe://oauth2redirect?code=${code}`;

        // 2. Fallback message after 1.5 seconds
        setTimeout(() => {
          document.body.innerHTML = `
            <h2 style="color: red; font-family: sans-serif;">App not found</h2>
            <p style="font-family: sans-serif;">
              Please install the app from the Play Store to continue.
              <br /><br />
              <strong>code=${code}</strong>
            </p>
          `;
        }, 1500);
      } else {
        document.body.innerHTML = `
          <h2 style="color: red; font-family: sans-serif;">Missing authorization code!</h2>
          <p style="font-family: sans-serif;">
            Please start the login process again.
          </p>
        `;
      }
    </script>
  </head>
  <body>Redirecting to app...</body>
</html>
