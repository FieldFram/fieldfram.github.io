<!DOCTYPE html>
<html>
  <head>
    <script>
      const params = new URLSearchParams(window.location.search);
      const code = params.get("code");

      if (code) {
        // Redirect to the app via custom URL scheme
        window.location.href = `fieldframe://oauth2redirect?code=${code}`;

        // Fallback to HTML page if app isn't installed (after 1 second)
        setTimeout(() => {
          window.location.href = `https://fieldfram.github.io/fieldframe-redirect/?code=${code}`;
        }, 1000);
      } else {
        document.body.innerText = "Missing authorization code!";
      }
    </script>
  </head>
  <body>Redirecting to app...</body>
</html>
